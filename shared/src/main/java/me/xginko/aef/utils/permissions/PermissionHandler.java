package me.xginko.aef.utils.permissions;

import me.xginko.aef.utils.Crafty;
import me.xginko.aef.utils.enums.TriState;
import me.xginko.aef.utils.models.Disableable;
import org.bukkit.permissions.Permissible;
import org.bukkit.plugin.java.JavaPlugin;

public interface PermissionHandler extends Disableable {

    static PermissionHandler create(JavaPlugin plugin) {
        if (Crafty.hasClass("net.luckperms.api.model.user.User")
                && Crafty.hasClass("net.luckperms.api.node.Node")
                && Crafty.hasClass("net.luckperms.api.util.Tristate")
                && Crafty.hasClass("net.luckperms.api.LuckPerms")) {
            return new LuckPermsPermissionHandler(plugin);
        }

        return new BukkitPermissionHandler(plugin);
    }

    default void disable() {}
    TriState permissionValue(Permissible permissible, String permission);
    void setPermission(Permissible permissible, String permission, TriState state);

}
