package me.xginko.aef.modules.packets;

import org.bukkit.Location;
import org.bukkit.entity.Player;
import org.bukkit.event.Cancellable;
import org.bukkit.event.Event;
import org.bukkit.event.HandlerList;

public class CustomPlayerRespawnEvent extends Event implements Cancellable {
    private static final HandlerList handlers = new HandlerList();
    private Player player;
    private boolean isBedSpawn;
    private boolean isCancelled;

    public HandlerList getHandlers() {
        return handlers;
    }

    public static HandlerList getHandlerList() {
        return handlers;
    }

    public CustomPlayerRespawnEvent(Player respawnPlayer) {
        super(true);
        this.player = respawnPlayer;
        this.isCancelled = false;
    }

    public Player getPlayer() {
        return this.player;
    }

    public void setCancelled(boolean cancel) {
        this.isCancelled = cancel;
    }

    public boolean isCancelled() {
        return this.isCancelled;
    }

    public boolean isBedSpawn() {
        Location potentialBedLocation = player.getPotentialBedLocation();
        Location respawnLocation = player.getLocation();

        if (potentialBedLocation != null) {
            return respawnLocation.distance(potentialBedLocation) <= 32;
        } else {
            return false;
        }
    }
}
