package me.moomoo.anarchyexploitfixes.prevention;

import me.moomoo.anarchyexploitfixes.Main;
import org.bukkit.Bukkit;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockPhysicsEvent;

public class LagExploits implements Listener {
    private final Main plugin;

    public LagExploits(Main plugin) {
        this.plugin = plugin;
    }

    @EventHandler
    private void onEntityChange(BlockPhysicsEvent evt) {
        FileConfiguration config = plugin.getConfig();

        double tpsDouble = Bukkit.getServer().getTPS()[0];
        if (tpsDouble < config.getDouble("FallingBlocks")) {
            evt.setCancelled(true);
        }
    }
}
